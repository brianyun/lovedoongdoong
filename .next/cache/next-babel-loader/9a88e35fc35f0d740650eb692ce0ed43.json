{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/hsyun/code/web/full_project/firebase-MBTI/pages/loading.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useDispatch } from \"react-redux\";\nimport { Typography, Row, Col } from \"antd\";\nimport { useSelector } from \"react-redux\";\nvar Text = Typography.Text;\nimport { ADD_URL } from \"../reducers/answer\";\nimport { MAKE_DIRECT_FALSE } from \"../reducers/answer\";\nimport db from \"../back/firestore\";\nimport storage from \"../back/cloudStorage\";\nimport { v4 as uuid } from \"uuid\";\nimport calculator from \"../back/calculator\";\nimport result from \"../assets/result.json\";\nimport { Container, containerCol, WidthImg } from \"../assets/css/style_loading\";\n\nvar Loading = function Loading() {\n  _s();\n\n  var router = useRouter();\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.answer;\n  }),\n      ans = _useSelector.ans;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.answer;\n  }),\n      url = _useSelector2.url;\n\n  var _useState = useState(null),\n      thumbUrl = _useState[0],\n      setThumbUrl = _useState[1];\n\n  var _useState2 = useState(false),\n      ready = _useState2[0],\n      setReady = _useState2[1];\n\n  var _useState3 = useState(null),\n      v = _useState3[0],\n      setV = _useState3[1]; // useEffect(() => {\n  // \tif (ans) {\n  // \t\tconsole.log(\"ans is \", ans);\n  // \t\tsetV(result[calculator(ans)]);\n  // \t\tconst now = new Date();\n  // \t\tconst uid = uuid();\n  // \t\tconst userObj = {\n  // \t\t\tanswer: ans,\n  // \t\t\ttype: calculator(ans),\n  // \t\t\tcreated_at: now,\n  // \t\t\tupdated_at: now,\n  // \t\t};\n  // \t\tdb.collection(\"results\")\n  // \t\t\t.doc(uid)\n  // \t\t\t.set(userObj)\n  // \t\t\t.then((res) => {})\n  // \t\t\t.catch((error) => {\n  // \t\t\t\t//alert(\"error: \" + error.message);\n  // \t\t\t\tconsole.log(error);\n  // \t\t\t});\n  // \t} else {\n  // \t\tconsole.log(\"no ans.. bye\");\n  // \t\trouter.push(\"/result/\".concat(calculator([])));\n  // \t}\n  // }, [ans]);\n  // useEffect(() => {\n  // \tif (v) {\n  // \t\tstorage\n  // \t\t\t.ref()\n  // \t\t\t.child(v[\"thumbnail\"])\n  // \t\t\t.getDownloadURL()\n  // \t\t\t.then((url) => {\n  // \t\t\t\tsetThumbUrl(url);\n  // \t\t\t})\n  // \t\t\t.catch((err) => {\n  // \t\t\t\talert(err);\n  // \t\t\t});\n  // \t}\n  // }, [v]);\n  // useEffect(() => {\n  // \tif (thumbUrl) {\n  // \t\tdispatch({\n  // \t\t\ttype: ADD_URL,\n  // \t\t\tdata: {\n  // \t\t\t\tthumbUrl: thumbUrl,\n  // \t\t\t},\n  // \t\t});\n  // \t\tsetReady(true);\n  // \t}\n  // }, [thumbUrl]);\n  // useEffect(() => {\n  // \tdispatch({\n  // \t\ttype: MAKE_DIRECT_FALSE,\n  // \t});\n  // }, [url[\"thumbUrl\"]]);\n  // if (typeof window !== \"undefined\") {\n  // \tfunction checkReady() {\n  // \t\tif (ready == false) {\n  // \t\t\twindow.setTimeout(checkReady, 500);\n  // \t\t} else {\n  // \t\t\trouter.push(\"/result/\".concat(v[\"id\"]));\n  // \t\t\tsetReady(false);\n  // \t\t}\n  // \t}\n  // \tcheckReady();\n  // }\n\n\n  return __jsx(React.Fragment, null, __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 4\n    }\n  }, __jsx(Col, _extends({}, containerCol, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }), __jsx(WidthImg, {\n    src: require(\"../assets/images/loading.gif\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 6\n    }\n  }), __jsx(Texty, {\n    top: 20,\n    font: 20,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 6\n    }\n  }, \"\\uBD84\\uC11D\\uC911..\"))), __jsx(Row, {\n    justify: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 4\n    }\n  }, __jsx(Col, {\n    xs: 16,\n    sm: 14,\n    md: 10,\n    lg: 8,\n    xl: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, __jsx(WidthImg, {\n    src: require(\"../assets/images/loading.gif\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 6\n    }\n  }))), __jsx(Row, {\n    justify: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 4\n    }\n  }, __jsx(Col, {\n    xs: 16,\n    sm: 14,\n    md: 10,\n    lg: 8,\n    xl: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, __jsx(Text, {\n    style: {\n      textAlign: \"center\",\n      display: \"block\",\n      marginTop: \"30px\",\n      fontSize: \"20px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 6\n    }\n  }, \"\\uBD84\\uC11D\\uC911..\"))));\n};\n\n_s(Loading, \"VDLzx3qouHmsrfx9Ff/QqdBMiV0=\", false, function () {\n  return [useRouter, useDispatch, useSelector, useSelector];\n});\n\n_c = Loading;\nexport default Loading;\n\nvar _c;\n\n$RefreshReg$(_c, \"Loading\");","map":{"version":3,"sources":["/Users/hsyun/code/web/full_project/firebase-MBTI/pages/loading.js"],"names":["React","useEffect","useState","useRouter","useDispatch","Typography","Row","Col","useSelector","Text","ADD_URL","MAKE_DIRECT_FALSE","db","storage","v4","uuid","calculator","result","Container","containerCol","WidthImg","Loading","router","dispatch","state","answer","ans","url","thumbUrl","setThumbUrl","ready","setReady","v","setV","require","textAlign","display","marginTop","fontSize"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useDispatch } from \"react-redux\";\nimport { Typography, Row, Col } from \"antd\";\nimport { useSelector } from \"react-redux\";\nconst { Text } = Typography;\n\nimport { ADD_URL } from \"../reducers/answer\";\nimport { MAKE_DIRECT_FALSE } from \"../reducers/answer\";\n\nimport db from \"../back/firestore\";\nimport storage from \"../back/cloudStorage\";\nimport { v4 as uuid } from \"uuid\";\nimport calculator from \"../back/calculator\";\nimport result from \"../assets/result.json\";\n\nimport { Container, containerCol, WidthImg } from \"../assets/css/style_loading\";\n\nconst Loading = () => {\n\tconst router = useRouter();\n\tconst dispatch = useDispatch();\n\tconst { ans } = useSelector((state) => state.answer);\n\tconst { url } = useSelector((state) => state.answer);\n\n\tconst [thumbUrl, setThumbUrl] = useState(null);\n\tconst [ready, setReady] = useState(false);\n\n\tconst [v, setV] = useState(null);\n\n\t// useEffect(() => {\n\t// \tif (ans) {\n\t// \t\tconsole.log(\"ans is \", ans);\n\t// \t\tsetV(result[calculator(ans)]);\n\n\t// \t\tconst now = new Date();\n\t// \t\tconst uid = uuid();\n\n\t// \t\tconst userObj = {\n\t// \t\t\tanswer: ans,\n\t// \t\t\ttype: calculator(ans),\n\t// \t\t\tcreated_at: now,\n\t// \t\t\tupdated_at: now,\n\t// \t\t};\n\n\t// \t\tdb.collection(\"results\")\n\t// \t\t\t.doc(uid)\n\t// \t\t\t.set(userObj)\n\t// \t\t\t.then((res) => {})\n\t// \t\t\t.catch((error) => {\n\t// \t\t\t\t//alert(\"error: \" + error.message);\n\t// \t\t\t\tconsole.log(error);\n\t// \t\t\t});\n\t// \t} else {\n\t// \t\tconsole.log(\"no ans.. bye\");\n\t// \t\trouter.push(\"/result/\".concat(calculator([])));\n\t// \t}\n\t// }, [ans]);\n\n\t// useEffect(() => {\n\t// \tif (v) {\n\t// \t\tstorage\n\t// \t\t\t.ref()\n\t// \t\t\t.child(v[\"thumbnail\"])\n\t// \t\t\t.getDownloadURL()\n\t// \t\t\t.then((url) => {\n\t// \t\t\t\tsetThumbUrl(url);\n\t// \t\t\t})\n\t// \t\t\t.catch((err) => {\n\t// \t\t\t\talert(err);\n\t// \t\t\t});\n\t// \t}\n\t// }, [v]);\n\n\t// useEffect(() => {\n\t// \tif (thumbUrl) {\n\t// \t\tdispatch({\n\t// \t\t\ttype: ADD_URL,\n\t// \t\t\tdata: {\n\t// \t\t\t\tthumbUrl: thumbUrl,\n\t// \t\t\t},\n\t// \t\t});\n\t// \t\tsetReady(true);\n\t// \t}\n\t// }, [thumbUrl]);\n\n\t// useEffect(() => {\n\t// \tdispatch({\n\t// \t\ttype: MAKE_DIRECT_FALSE,\n\t// \t});\n\t// }, [url[\"thumbUrl\"]]);\n\n\t// if (typeof window !== \"undefined\") {\n\t// \tfunction checkReady() {\n\t// \t\tif (ready == false) {\n\t// \t\t\twindow.setTimeout(checkReady, 500);\n\t// \t\t} else {\n\t// \t\t\trouter.push(\"/result/\".concat(v[\"id\"]));\n\t// \t\t\tsetReady(false);\n\t// \t\t}\n\t// \t}\n\t// \tcheckReady();\n\t// }\n\n\treturn (\n\t\t<>\n\t\t\t<Container>\n\t\t\t\t<Col {...containerCol}>\n\t\t\t\t\t<WidthImg src={require(\"../assets/images/loading.gif\")} />\n\t\t\t\t\t<Texty top={20} font={20}>\n\t\t\t\t\t\t분석중..\n\t\t\t\t\t</Texty>\n\t\t\t\t</Col>\n\t\t\t</Container>\n\n\t\t\t<Row justify=\"center\">\n\t\t\t\t<Col xs={16} sm={14} md={10} lg={8} xl={8}>\n\t\t\t\t\t<WidthImg src={require(\"../assets/images/loading.gif\")} />\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row justify=\"center\">\n\t\t\t\t<Col xs={16} sm={14} md={10} lg={8} xl={8}>\n\t\t\t\t\t<Text\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\t\t\tdisplay: \"block\",\n\t\t\t\t\t\t\tmarginTop: \"30px\",\n\t\t\t\t\t\t\tfontSize: \"20px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t분석중..\n\t\t\t\t\t</Text>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</>\n\t);\n};\n\nexport default Loading;\n"]},"metadata":{},"sourceType":"module"}